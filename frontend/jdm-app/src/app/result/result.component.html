<app-result-toolbar></app-result-toolbar>
<blockquote id="description"><p>Ceci est un test de description elle est un peu longue dzadjezfdjez dezfezfref dfezfezfezfezfelle est un peu longue dzadjezfdjez dezfezfref dfezfezfezfezfelle est un peu longue dzadjezfdjez dezfezfref dfezfezfezfezfelle est un peu longue dzadjezfdjez dezfezfref dfezfezfezfezf</p></blockquote>
<div id="searchAssoc">
  <div id="chipFav">
    <mat-chip *ngFor="let pref of preferences" (click)='addToAssoc(pref)' [selectable]="selectable">
      <mat-icon style="color:#ef9a9a">favorite</mat-icon>
      <div class="fav"> {{pref.name_fr}}</div>
    </mat-chip>
  </div>
  <div id="chipSearch">
    <mat-form-field class="example-chip-list">
      <mat-chip-list #chipList>
      <input
      type="text"
      placeholder="Nouvelle association"
      #associationInput
      [formControl]="associationCtrl"
      [matAutocomplete]="auto"
      [matChipInputFor]="chipList">
    </mat-chip-list>
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
      <mat-option *ngFor="let all of filteredAssociations | async" [value]="association">
        {{all}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
  <button id="listBtn" mat-button (click)="openDialog()"><mat-icon>list</mat-icon></button>
</div>
<div id="selection">
<div id="selec" *ngIf="selectedAssociation != ''">
    Associations Séléctionné :
  </div>
  </div>
  <div id="chipSelec">
    <mat-chip *ngFor="let selec of selectedAssociation">
      {{selec.name_fr}}
      <mat-icon matChipRemove (click)="removeAssocSelected(selec)">cancel</mat-icon>
    </mat-chip>
  </div>
</div>
<mat-divider *ngIf="selectedAssociation != ''"></mat-divider>
<div id="containerScrollToolbar">
  <div id="scroll" #stickyMenu [class.noSticky]= "!sticky" [class.sticky] = "sticky">
  <app-scroll-toolbar *ngIf="selectedAssociation != ''"></app-scroll-toolbar>
</div>
</div>

<div class="cardResult" *ngFor="let res of selectedAssociation" >
  <div class="cards">
    <mat-card class="example-card">
      <div id="closeCard"><mat-icon (click)="removeAssocSelected(res)">close</mat-icon></div>
      <mat-card-header>
        <mat-card-title>{{res.name_fr}}</mat-card-title>
      </mat-card-header>
      <mat-divider [inset]="true" ></mat-divider>
      <div class="spinner" *ngIf="this.showSpinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
      </div>
      <mat-card-content *ngIf="!showSpinner && resultAssoc !== null && resultAssoc.relations_sortantes[res.id] != undefined">
        <mat-grid-list cols="2" rowHeight="30px" *ngIf="!this.showSpinner">
          <mat-grid-tile *ngFor="let ra of resultAssocData">
              <div class="nomResult" matTooltip="{{ra.nom}}" matTooltipPosition="above" matTooltipShowDelay="400">{{ra.nom}}:</div> <div class="poidsResult">{{ra.poids}}</div>
          </mat-grid-tile>
        </mat-grid-list>
      </mat-card-content>
      <p *ngIf="!showSpinner && resultAssoc != null && resultAssoc.relations_sortantes[res.id] == undefined">
        Cette association ne comporte aucun mot
      </p>
      <mat-paginator *ngIf="!showSpinner && resultAssoc != null && resultAssoc.relations_sortantes[res.id] != undefined " [length]='resultAssoc.relations_sortantes[res.id].length'
                [pageSize]="size"
                [pageIndex]="page"
                [pageSizeOptions]="[18, 36, 54]"
                (page)="getData($event, res.id)">
      </mat-paginator>
    </mat-card>
  </div>
</div>
